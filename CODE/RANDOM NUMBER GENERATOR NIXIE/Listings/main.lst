C51 COMPILER V9.60.0.0   MAIN                                                              03/28/2021 22:56:33 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include"reg52.h"
   2          unsigned int interruptCounter;
   3          unsigned char rand;
   4          
   5          unsigned char vram[4];
   6          
   7          void refresh(){
   8   1        unsigned char rand_temp = rand;
   9   1        int cnt;
  10   1        for(cnt = 0; cnt < 4; cnt++){
  11   2          vram[cnt] = rand_temp%10;
  12   2          rand_temp /= 10;
  13   2        }
  14   1      }
  15          
  16          unsigned char code dotTable[] = {
  17            0x40,//extinguish
  18            0x00//light up
  19          };
  20          unsigned char code digitSelectTable[] = {
  21            0x10,
  22            0x20,
  23            0x00,
  24            0x30
  25          };
  26          unsigned char code numberTable[] = {
  27            0x00,
  28            0x01,
  29            0x08,
  30            0x09,
  31            0x04,
  32            0x05,
  33            0x0C,
  34            0x0D,
  35            0x02,
  36            0x03
  37          };
  38          
  39          void SystemInit(void){
  40   1        TMOD=0x21;
  41   1        TH0=(65536-2587)/256; 
  42   1        TL0=(65536-2587)%256;
  43   1        IT0=1;
  44   1        IT1=0;
  45   1        TH1=0x00;
  46   1        TL1=0x00;
  47   1        ET0=1;
  48   1        TR0=1;
  49   1        TR1=1;
  50   1        EX0=1;
  51   1        EA=1;
  52   1        interruptCounter = 0;
  53   1      }
  54          
C51 COMPILER V9.60.0.0   MAIN                                                              03/28/2021 22:56:33 PAGE 2   

  55          int main(void){
  56   1        SystemInit();
  57   1        while(1){
  58   2        };
  59   1      }
  60          
  61          void Random() interrupt 0{
  62   1        rand = TL1;
  63   1        refresh();
  64   1      }
  65          
  66          void Timer0_IRQ(void) interrupt 1{
  67   1        TH0=(655365-2587)/256;
  68   1        TL0=(655365-2587)%256;
  69   1        interruptCounter = (interruptCounter+1)%4;
  70   1        switch(interruptCounter){
  71   2          case 0 :
  72   2            P1 = digitSelectTable[0] | numberTable[vram[3]] | dotTable[0];
  73   2            break;
  74   2          case 1 :
  75   2            P1 = digitSelectTable[1] | numberTable[vram[2]] | dotTable[0];
  76   2            break;
  77   2          case 2 :
  78   2            P1 = digitSelectTable[2] | numberTable[vram[1]] | dotTable[0];
  79   2            break;
  80   2          case 3 :
  81   2            P1 = digitSelectTable[3] | numberTable[vram[0]] | dotTable[0];
  82   2            break;
  83   2          default:
  84   2            break;
  85   2        }
  86   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    230    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      7    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)

C51 COMPILER V8.08   JVZHENJIANPAN                                                         04/26/2015 23:47:10 PAGE 1   


C51 COMPILER V8.08, COMPILATION OF MODULE JVZHENJIANPAN
OBJECT MODULE PLACED IN jvzhenjianpan.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE jvzhenjianpan.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*********************************************************************************
   2          * 【编写时间】： 2014年3月5日
   3          * 【作    者】： 清翔电子:03
   4          * 【版    本】： 1.0
   5          * 【网    站】： http://www.qxmcu.com/ 
   6          * 【淘宝店铺】： http://qxmcu.taobao.com/
   7          * 【实验平台】： QX-MCS51 单片机开发板
   8          * 【外部晶振】： 11.0592mhz     
   9          * 【主控芯片】： STC89C52
  10          * 【编译环境】： Keil μVisio3  
  11          * 【程序功能】： 4*4键盘检测程序,按下键后相应的代码显示在数码管上                                                                                   
  12          * 【使用说明】： 
  13          *  说明：免费开源，不提供源代码分析.
  14          **********************************************************************************/
  15          
  16          #include<reg51.h>
  17          sbit beep=P2^3;
  18          sbit dula=P2^6;
  19          sbit wela=P2^7;
  20          unsigned char i=100;
  21          unsigned char j,k,temp,key;
  22          void delay(unsigned char i)
  23          {
  24   1        for(j=i;j>0;j--)
  25   1          for(k=125;k>0;k--);
  26   1      }
  27          unsigned char code table[]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,
  28                                  0x07,0x7f,0x6f,0x77,0x7c,0x39,0x5e,0x79,0x71};
  29          display(unsigned char num)
  30          {
  31   1               P0=table[num];
  32   1               dula=1;
  33   1               dula=0;
  34   1               P0=0x00;
  35   1               wela=1;
  36   1               wela=0;
  37   1      }
  38          void main()
  39          {
  40   1        dula=0;
  41   1        wela=0;
  42   1        while(1)
  43   1        {
  44   2          P3=0xfe;
  45   2          temp=P3;
  46   2          temp=temp&0xf0;
  47   2          if(temp!=0xf0)
  48   2          {
  49   3            delay(10);
  50   3            if(temp!=0xf0)
  51   3            {
  52   4              temp=P3;
  53   4              switch(temp)
  54   4              {
  55   5                case 0xee:
C51 COMPILER V8.08   JVZHENJIANPAN                                                         04/26/2015 23:47:10 PAGE 2   

  56   5                     key=0;
  57   5                     break;
  58   5      
  59   5                case 0xde:
  60   5                     key=1;
  61   5                     break;
  62   5      
  63   5                case 0xbe:
  64   5                     key=2;
  65   5                     break;
  66   5      
  67   5                case 0x7e:
  68   5                     key=3;
  69   5                     break;
  70   5               }
  71   4               while(temp!=0xf0)
  72   4               {
  73   5                 temp=P3;
  74   5                 temp=temp&0xf0;
  75   5                 beep=0;
  76   5               }
  77   4               beep=1;
  78   4              display(key);
  79   4             //  P1=0xfe;
  80   4            }
  81   3          }
  82   2          P3=0xfd;
  83   2          temp=P3;
  84   2          temp=temp&0xf0;
  85   2          if(temp!=0xf0)
  86   2          {
  87   3            delay(10);
  88   3            if(temp!=0xf0)
  89   3            {
  90   4              temp=P3;
  91   4              switch(temp)
  92   4              {
  93   5                case 0xed:
  94   5                     key=4;
  95   5                     break;
  96   5      
  97   5                case 0xdd:
  98   5                     key=5;
  99   5                     break;
 100   5      
 101   5                case 0xbd:
 102   5                     key=6;
 103   5                     break;
 104   5      
 105   5                case 0x7d:
 106   5                     key=7;
 107   5                     break;
 108   5               }
 109   4               while(temp!=0xf0)
 110   4               {
 111   5                 temp=P3;
 112   5                 temp=temp&0xf0;
 113   5                 beep=0;
 114   5               }
 115   4               beep=1;
 116   4               display(key);
 117   4            }
C51 COMPILER V8.08   JVZHENJIANPAN                                                         04/26/2015 23:47:10 PAGE 3   

 118   3            }
 119   2          P3=0xfb;
 120   2          temp=P3;
 121   2          temp=temp&0xf0;
 122   2          if(temp!=0xf0)
 123   2          {
 124   3            delay(10);
 125   3            if(temp!=0xf0)
 126   3            {
 127   4              temp=P3;
 128   4              switch(temp)
 129   4              {
 130   5                case 0xeb:
 131   5                     key=8;
 132   5                     break;
 133   5      
 134   5                case 0xdb:
 135   5                     key=9;
 136   5                     break;
 137   5      
 138   5                case 0xbb:
 139   5                     key=10;
 140   5                     break;
 141   5      
 142   5                case 0x7b:
 143   5                     key=11;
 144   5                     break;
 145   5               }
 146   4               while(temp!=0xf0)
 147   4               {
 148   5                 temp=P3;
 149   5                 temp=temp&0xf0;
 150   5                 beep=0;
 151   5               }
 152   4               beep=1;
 153   4              display(key);
 154   4            }
 155   3            }
 156   2          P3=0xf7;
 157   2          temp=P3;
 158   2          temp=temp&0xf0;
 159   2          if(temp!=0xf0)
 160   2          {
 161   3            delay(10);
 162   3            if(temp!=0xf0)
 163   3            {
 164   4              temp=P3;
 165   4              switch(temp)
 166   4              {
 167   5                case 0xe7:
 168   5                     key=12;
 169   5                     break;
 170   5      
 171   5                case 0xd7:
 172   5                     key=13;
 173   5                     break;
 174   5      
 175   5                case 0xb7:
 176   5                     key=14;
 177   5                     break;
 178   5      
 179   5                case 0x77:
C51 COMPILER V8.08   JVZHENJIANPAN                                                         04/26/2015 23:47:10 PAGE 4   

 180   5                     key=15;
 181   5                     break;
 182   5               }
 183   4               while(temp!=0xf0)
 184   4               {
 185   5                 temp=P3;
 186   5                 temp=temp&0xf0;
 187   5                 beep=0;
 188   5               }
 189   4               beep=1;
 190   4              display(key);
 191   4            }
 192   3          }
 193   2        }
 194   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    392    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)

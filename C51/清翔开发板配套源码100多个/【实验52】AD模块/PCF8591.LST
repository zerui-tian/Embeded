C51 COMPILER V8.08   PCF8591                                                               08/18/2015 10:32:31 PAGE 1   


C51 COMPILER V8.08, COMPILATION OF MODULE PCF8591
OBJECT MODULE PLACED IN PCF8591.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE PCF8591.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include "qxmcs51_config.h"
   2          #include "delay.h"
   3          #include "IIC.h"
   4          #include "PCF8591.H"
   5          
   6          #define DAC_EN 0x40
   7          #define ADC_AutoINC 0x04
   8          /*DACÊä³ö*//*
   9          bit I2C_DAC_WriteData(uchar Data)
  10          {
  11                  I2C_Start();
  12                  I2C_send_byte(PCF8591_ADDR + 0);
  13                  if (!Test_ACK())
  14                  {
  15                          return(0);
  16                  }
  17                  I2C_send_byte(DAC_EN); 
  18                  if (!Test_ACK())
  19                  {
  20                          return(0);
  21                  }
  22                  I2C_send_byte(Data); 
  23                  if (!Test_ACK())
  24                  {
  25                          return(0);
  26                  }
  27                  I2C_Stop();
  28                  return(1);      
  29          }        */
  30          
  31          /*AD¶ÁÊý¾Ý*/
  32          BOOL I2C_ADC_ReadData(uchar ADDR, uchar *ADC_Value)
  33          {
  34   1              I2C_Start();
  35   1              I2C_send_byte(PCF8591_ADDR + 0);
  36   1              if (!Test_ACK())
  37   1              {
  38   2                      return(0);
  39   2              }
  40   1              I2C_send_byte(ADDR);
  41   1              Master_ACK(0);
  42   1              I2C_Start();
  43   1              I2C_send_byte(PCF8591_ADDR + 1);
  44   1              if (!Test_ACK())
  45   1              {
  46   2                      return(0);
  47   2              }
  48   1              *ADC_Value = I2C_read_byte();
  49   1              Master_ACK(0);
  50   1              I2C_Stop();
  51   1              return(1);      
  52   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V8.08   PCF8591                                                               08/18/2015 10:32:31 PAGE 2   

   CODE SIZE        =     69    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
